print("ãƒ­ãƒ¼ãƒ‰é–‹å§‹")

-- ãƒ†ãƒ¬ãƒãƒ¼ãƒˆå¾Œã«è‡ªå‹•ã§ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å†å®Ÿè¡Œã•ã›ã‚‹è¨­å®š
local success, err = pcall(function()
	local scriptUrl = "https://raw.githubusercontent.com/works-yesed-scriptedit/WYS-Alpha-1.0.7/refs/heads/main/mainScript"
	queueonteleport("loadstring(game:HttpGet('" .. scriptUrl .. "'))()")
end)

if not success then
	warn("queueonteleport ã‚»ãƒƒãƒˆå¤±æ•—:", err)
end

-- New draggable Orion Lib script for hub creations!
local OrionLib = loadstring(game:HttpGet(('https://pastebin.com/raw/WRUyYTdY')))()

--ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ä½œæˆ
local Window = OrionLib:MakeWindow({
    Name = "WorksYesed Hub",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "WorksYesed Hub" -- Put the name of your hub or script here!
})

print("Loading complete")

OrionLib:MakeNotification({
	Name = "NB_sub1ä½œ",
	Content = "ã¾ã è©¦ä½œä¸­!!",
	Image = "rbxassetid://4483345998",
	Time = 5
})

-- Homeã‚¿ãƒ–ã‚’ä½œæˆ
local HomeTab = Window:MakeTab({
    Name = "Home",
    Icon = "rbxassetid://4483345998", -- ã‚¢ã‚¤ã‚³ãƒ³è‡ªç”±ã«å¤‰æ›´ã—ã¦OK
    PremiumOnly = false
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local startTime = tick()

-- å·¦ä¸Šã‚¨ãƒªã‚¢ï¼šServer Informationã‚»ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ
HomeTab:AddSection({
    Name = "Server Information"
})

-- ãƒ©ãƒ™ãƒ«ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
local ServerInfoLabels = {}

-- ãƒ©ãƒ™ãƒ«ã‚’é †ç•ªã«ä½œæˆ
ServerInfoLabels.Players = HomeTab:AddLabel("Players: Loading...")
ServerInfoLabels.MaxPlayers = HomeTab:AddLabel("Maximum Players: " .. tostring(Players.MaxPlayers))
ServerInfoLabels.InServerFor = HomeTab:AddLabel("In server for: 0s")

-- Join Scriptãƒœã‚¿ãƒ³ä½œæˆ
HomeTab:AddButton({
    Name = "Copy Join Script",
    Callback = function()
        setclipboard('game:GetService("TeleportService"):TeleportToPlaceInstance(' .. game.PlaceId .. ', "' .. game.JobId .. '")')
    end
})

-- Heartbeatã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
RunService.Heartbeat:Connect(function()
    -- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼äººæ•°
    ServerInfoLabels.Players:Set("Players: " .. tostring(#Players:GetPlayers()))

    -- ãƒ—ãƒ¬ãƒ¼ã‚¹æ»åœ¨æ™‚é–“
    local elapsed = math.floor(tick() - startTime)
    local minutes = math.floor(elapsed / 60)
    local seconds = elapsed % 60
    ServerInfoLabels.InServerFor:Set(string.format("In server for: %02d:%02d", minutes, seconds))
end)
--Discord button
HomeTab:AddButton({
    Name = "ãƒªãƒ³ã‚¯ã‚³ãƒ”ãƒ¼",
    Callback = function()
        -- ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒªãƒ³ã‚¯ã‚’æŒ‡å®š
        local linkToCopy = "https://www.tiktok.com/@works.yesed"  -- ã“ã“ã«ã‚³ãƒ”ãƒ¼ã—ãŸã„URLã‚’è¨­å®š
        
        -- ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆå®Ÿè¡Œè€…ã®ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼‰
        setclipboard(linkToCopy)  -- ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
    end    
})

--ã“ã“ã‹ã‚‰æ–°ã—ã„ã‚¿ãƒ–
--ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¿ãƒ–ã®ä½œæˆ
local CharacterTab = Window:MakeTab({
	Name = "Character",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

--ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½œæˆ
local Section = CharacterTab:AddSection({
	Name = "Player"
})

--Walk Speed TextBox
CharacterTab:AddTextbox({
    Name = "WalkSpeed",
    Default = "",
    TextDisappear = false,
    Callback = function(Value)
        local speedValue = tonumber(Value)
        if speedValue then
            -- ã‚¹ãƒ”ãƒ¼ãƒ‰å¤‰æ›´ã‚’æœ‰åŠ¹åŒ–
            getgenv().Enabled = true
            getgenv().Speed = speedValue
            -- SimpleSpeedã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œ
            loadstring(game:HttpGet("https://raw.githubusercontent.com/eclipsology/SimpleSpeed/main/SimpleSpeed.lua"))()
            print("WalkSpeed set to: " .. speedValue)
        else
            warn("ç„¡åŠ¹ãªå…¥åŠ›ã§ã™ï¼æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")
            OrionLib:MakeNotification({
	Name = "ç„¡åŠ¹ãªå…¥åŠ›ã§ã™ã€‚",
	Content = "æ­£ã—ã„æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
	Image = "rbxassetid://4483345998",
	Time = 5
})
        end
    end
})

--Jump Power TextBox
CharacterTab:AddTextbox({
    Name = "JumpPower",
    Default = "",
    TextDisappear = false,
    Callback = function(Value)
        -- å…¥åŠ›å€¤ã‚’æ•°å€¤ã«å¤‰æ›
        local jumpPowerValue = tonumber(Value)
        
        -- æ•°å€¤ãŒæ­£ã—ã„å ´åˆã€ã‚¸ãƒ£ãƒ³ãƒ—ãƒ‘ãƒ¯ãƒ¼ã‚’è¨­å®š
        if jumpPowerValue and jumpPowerValue > 0 then
            -- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®Humanoidã‚’å–å¾—
            local player = game.Players.LocalPlayer
            local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
            
            if humanoid then
                humanoid.JumpPower = jumpPowerValue  -- JumpPowerã‚’è¨­å®š
                warn("ã‚¸ãƒ£ãƒ³ãƒ—ãƒ‘ãƒ¯ãƒ¼ï¼ˆJumpPowerï¼‰ãŒ " .. jumpPowerValue .. " ã«è¨­å®šã•ã‚Œã¾ã—ãŸã€‚")
            else
                warn("HumanoidãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚")
                OrionLib:MakeNotification({
	Name = "HumanoidãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
	Content = "ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",
	Image = "rbxassetid://4483345998",
	Time = 5
})
            end
        else
            warn("ç„¡åŠ¹ãªå…¥åŠ›ã§ã™ï¼æ­£ã—ã„æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")
            OrionLib:MakeNotification({
	Name = "ç„¡åŠ¹ãªå…¥åŠ›ã§ã™",
	Content = "æ­£ã—ã„æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
	Image = "rbxassetid://4483345998",
	Time = 5
})
        end
    end,
})

--Fov TextBox
CharacterTab:AddTextbox({
	Name = "Fov",
	Default = "70",
	TextDisappear = true,
	Callback = function(Value)
		local num = tonumber(Value)
		if num then
			game.Workspace.CurrentCamera.FieldOfView = num
			print("FOV set to", num)
		else
			warn("ç„¡åŠ¹ãªå…¥åŠ›")
		end
	end	  
})

--Gravity TextBox
CharacterTab:AddTextbox({
	Name = "Gravity",
	Default = "196.2",
	TextDisappear = false,
	Callback = function(Value)
		local num = tonumber(Value)
		if num then
			game.Workspace.Gravity = num
			print("Gravity set to", num)
		else
			warn("ç„¡åŠ¹ãªå…¥åŠ›")
		end
	end	  
})

--ä¸‰äººç§° button
CharacterTab:AddButton({
	Name = "ä¸‰äººç§°",
	Callback = function()
		print("button pressed")
		local player = game.Players.LocalPlayer
		player.CameraMode = Enum.CameraMode.Classic
		player.CameraMaxZoomDistance = 128
		player.CameraMinZoomDistance = 0.5
	end    
})

--Backpack Enable
local StarterGui = game:GetService("StarterGui")

CharacterTab:AddButton({
	Name = "Backpack Enable",
	Callback = function()
		StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, true)
		print("Backpack Enabled")
	end    
})

--Infinite Jump Toggle
local infiniteJumpConnection = nil  -- ç„¡é™ã‚¸ãƒ£ãƒ³ãƒ—ã®æ¥ç¶š
local humanoidDiedConnection = nil  -- æ­»äº¡æ™‚ã®æ¥ç¶š
local isInfiniteJumpEnabled = false  -- ãƒˆã‚°ãƒ«çŠ¶æ…‹ä¿æŒ

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local localPlayer = Players.LocalPlayer

-- ç„¡é™ã‚¸ãƒ£ãƒ³ãƒ—ã‚’æœ‰åŠ¹ã«ã™ã‚‹
local function enableInfiniteJump(humanoid)
    if not infiniteJumpConnection then
        infiniteJumpConnection = UserInputService.JumpRequest:Connect(function()
            if humanoid and humanoid:GetState() ~= Enum.HumanoidStateType.Physics then
                humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    end
    if humanoid and not humanoidDiedConnection then
        humanoidDiedConnection = humanoid.Died:Connect(function()
            -- æ­»äº¡æ™‚ã«ã¯æ¥ç¶šã‚’åˆ‡ã‚‹
            if infiniteJumpConnection then
                infiniteJumpConnection:Disconnect()
                infiniteJumpConnection = nil
            end
            if humanoidDiedConnection then
                humanoidDiedConnection:Disconnect()
                humanoidDiedConnection = nil
            end
        end)
    end
end

-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒç”Ÿæˆã•ã‚ŒãŸã¨ã
local function onCharacterAdded(character)
    local humanoid = character:WaitForChild("Humanoid")
    if isInfiniteJumpEnabled then
        enableInfiniteJump(humanoid)
    end
end

-- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
localPlayer.CharacterAdded:Connect(onCharacterAdded)
if localPlayer.Character then
    onCharacterAdded(localPlayer.Character)
end

-- ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³
CharacterTab:AddToggle({
    Name = "Infinite Jump",
    Default = false,
    Callback = function(Value)
        isInfiniteJumpEnabled = Value
        if Value then
            local character = localPlayer.Character
            if character then
                local humanoid = character:FindFirstChild("Humanoid")
                if humanoid then
                    enableInfiniteJump(humanoid)
                end
            end
        else
            -- ã‚ªãƒ•ã«ã—ãŸã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã™ã¹ã¦åˆ‡ã‚‹
            if infiniteJumpConnection then
                infiniteJumpConnection:Disconnect()
                infiniteJumpConnection = nil
            end
            if humanoidDiedConnection then
                humanoidDiedConnection:Disconnect()
                humanoidDiedConnection = nil
            end
        end
    end,
})

--Float Toggle
local platformPart -- å¤–ã«ä¿æŒ
local moveConnection

CharacterTab:AddToggle({
	Name = "float",
	Default = false,
	Callback = function(Value)
		if Value then
			local player = game.Players.LocalPlayer
			local character = player.Character or player.CharacterAdded:Wait()
			local hrp = character:WaitForChild("HumanoidRootPart")

			-- Partã®ä½œæˆ
			platformPart = Instance.new("Part")
			platformPart.Size = Vector3.new(4, 1, 4)
			platformPart.Anchored = true
			platformPart.CanCollide = true
			platformPart.Name = "FootPlatform"
			platformPart.Parent = workspace

			-- è¶³å…ƒã«è¿½å¾“
			local runService = game:GetService("RunService")
			moveConnection = runService.RenderStepped:Connect(function()
				if not platformPart or not platformPart.Parent then
					moveConnection:Disconnect()
					return
				end

				local footY = hrp.Position.Y - 2.9998  -- R6
				local pos = Vector3.new(hrp.Position.X, footY - (platformPart.Size.Y / 2), hrp.Position.Z)
				platformPart.Position = pos
			end)

		else
			-- ãƒˆã‚°ãƒ«ãŒã‚ªãƒ•ã«ãªã£ãŸã¨ãã®å‡¦ç†
			if moveConnection then
				moveConnection:Disconnect()
				moveConnection = nil
			end

			if platformPart then
				platformPart:Destroy()
				platformPart = nil
			end
		end
	end
})

--Noclip Toggle
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local noclipEnabled = false

-- Noclipã‚’æœ‰åŠ¹/ç„¡åŠ¹ã«ã™ã‚‹é–¢æ•°
local function toggleNoclip(state)
    noclipEnabled = state
end

-- å¸¸ã«CanCollideã‚’falseã«ã™ã‚‹ãƒ«ãƒ¼ãƒ—
RunService.Stepped:Connect(function()
    if noclipEnabled then
        character = player.Character or player.CharacterAdded:Wait()
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

-- Orion UIã®Toggleã¨é€£æºã™ã‚‹ä¾‹ï¼ˆå‚è€ƒï¼‰
-- Window:MakeTabãªã©ã§ä½œã£ãŸå¾Œã«ã“ã‚Œã‚’è¿½åŠ 
CharacterTab:AddToggle({
    Name = "Noclip",
    Default = false,
    Callback = function(state)
        toggleNoclip(state)
    end
})

--Freeze Toggle
local player = game.Players.LocalPlayer
local savedVelocity = nil
local savedAnchoredStates = {}

local function setAllPartsAnchored(character, state)
	for _, part in ipairs(character:GetDescendants()) do
		if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
			if state then
				-- ä¿å­˜ã—ã¦ã‹ã‚‰ã‚¢ãƒ³ã‚«ãƒ¼ã™ã‚‹
				savedAnchoredStates[part] = part.Anchored
				part.Anchored = true
			else
				-- å…ƒã«æˆ»ã™
				if savedAnchoredStates[part] ~= nil then
					part.Anchored = savedAnchoredStates[part]
				end
			end
		end
	end
	if not state then
		savedAnchoredStates = {} -- ãƒªã‚»ãƒƒãƒˆ
	end
end

CharacterTab:AddToggle({
	Name = "Freeze",
	Default = false,
	Callback = function(Value)
		local character = player.Character or player.CharacterAdded:Wait()
		local humanoid = character:WaitForChild("Humanoid")
		local hrp = character:WaitForChild("HumanoidRootPart")

		if Value then
			-- æ…£æ€§ä¿å­˜
			savedVelocity = hrp.Velocity

			-- åŸºæœ¬Freeze
			humanoid.WalkSpeed = 0
			humanoid.JumpPower = 0
			humanoid.AutoRotate = false

			-- å…¨èº«ã‚¢ãƒ³ã‚«ãƒ¼ã§ç‰©ç†åœæ­¢ï¼ˆãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«å¯¾å¿œï¼‰
			setAllPartsAnchored(character, true)

			-- BodyMoversã§ä½ç½®ã¨å‘ãã‚’å›ºå®š
			local bv = Instance.new("BodyPosition")
			bv.Name = "FreezePosition"
			bv.Position = hrp.Position
			bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
			bv.P = 100000
			bv.D = 1000
			bv.Parent = hrp

			local bg = Instance.new("BodyGyro")
			bg.Name = "FreezeRotation"
			bg.CFrame = hrp.CFrame
			bg.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
			bg.P = 100000
			bg.D = 1000
			bg.Parent = hrp
		else
			-- Freezeè§£é™¤
			humanoid.WalkSpeed = 16
			humanoid.JumpPower = 50
			humanoid.AutoRotate = true

			-- Anchoredå¾©å…ƒ
			setAllPartsAnchored(character, false)

			-- BodyMoverså‰Šé™¤
			local bv = hrp:FindFirstChild("FreezePosition")
			if bv then bv:Destroy() end

			local bg = hrp:FindFirstChild("FreezeRotation")
			if bg then bg:Destroy() end

			-- æ…£æ€§å¾©å…ƒ
			if savedVelocity then
				hrp.Velocity = savedVelocity
				savedVelocity = nil
			end
		end
	end
})

--==ã“ã“ã‚ˆã‚Šä¸‹ã¯åˆ¥ã®ã‚¿ãƒ–ã«ãªã‚Šã¾ã™==--

--ã‚¿ãƒ–ã®ä½œæˆ
local ToolTab = Window:MakeTab({
	Name = "Tool",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

--ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½œæˆ
local Section = ToolTab:AddSection({
	Name = "Client"
})

--Teleport Tool button
ToolTab:AddButton({
	Name = "Teleport Tool",
	Callback = function()
      		print("button pressed")
      		mouse = game.Players.LocalPlayer:GetMouse()
tool = Instance.new("Tool")
tool.RequiresHandle = false
tool.Name = "Teleport Tool"
tool.Activated:connect(function()
local pos = mouse.Hit+Vector3.new(0,2.5,0)
pos = CFrame.new(pos.X,pos.Y,pos.Z)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = pos
end)
tool.Parent = game.Players.LocalPlayer.Backpack
  	end    
})

--Btools button
ToolTab:AddButton({
	Name = "BTools",
	Callback = function()
      		print("button pressed")
      		--[[
A distribution of https://wearedevs.net/scripts
Last updated August 2, 2021

Description: Gives your player the old system of building tools

Instruction: Inject this script into any game using a Lua executor like JJSploit. 
]]

backpack = game:GetService("Players").LocalPlayer.Backpack

hammer = Instance.new("HopperBin")
hammer.Name = "Hammer"
hammer.BinType = 4
hammer.Parent = backpack

cloneTool = Instance.new("HopperBin")
cloneTool.Name = "Clone"
cloneTool.BinType = 3
cloneTool.Parent = backpack

grabTool = Instance.new("HopperBin")
grabTool.Name = "Grab"
grabTool.BinType = 2
grabTool.Parent = backpack
  	end    
})

--Invisible Tool button
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- ãƒãƒ¼ã‚¯ãƒªãƒƒãƒ—å‡¦ç†
local RunService = game:GetService("RunService")
local noclipEnabled = false
local noclipConnection

local function enableNoclip()
    noclipConnection = RunService.Stepped:Connect(function()
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") and part.CanCollide == true then
                part.CanCollide = false
            end
        end
    end)
end

local function disableNoclip()
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
    end
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = true
        end
    end
end

-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒå¤‰ã‚ã£ãŸã¨ãã«å†è¨­å®š
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter  -- æ–°ã—ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’è¨­å®š
    
    -- æ—¢å­˜ã®ãƒãƒ¼ã‚¯ãƒªãƒƒãƒ—çŠ¶æ…‹ã‚’ç„¡åŠ¹ã«ã™ã‚‹
    if noclipEnabled then
        enableNoclip()
    end
end)

-- ãƒœã‚¿ãƒ³ã®å‡¦ç†
ToolTab:AddButton({
    Name = "Invisible Tool",
    Callback = function()
        print("é€æ˜åŒ–ãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆä¸­...")

        -- ãƒ„ãƒ¼ãƒ«ã®ä½œæˆ
        local tool = Instance.new("Tool")
        tool.Name = "Invisible Tool"
        tool.RequiresHandle = false
        tool.Parent = player.Backpack

        -- ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã¨ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã®é–¢æ•°
        local function fadeTransparency(targetTransparency)
            for _, part in pairs(character:GetDescendants()) do
                -- BasePartã¨ã—ã¦é€æ˜åŒ–
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    -- ã‚‚ã—é¡”ãŒã‚ã‚Œã°ãã‚Œã‚‚é€æ˜åŒ–ã™ã‚‹
                    if part.Name == "Head" then
                        for _, face in pairs(part:GetChildren()) do
                            if face:IsA("Decal") or face:IsA("MeshPart") then
                                face.Transparency = targetTransparency
                            end
                        end
                    end
                    local tween = TweenService:Create(part, TweenInfo.new(0.5), {Transparency = targetTransparency})
                    tween:Play()
                end
            end
        end

        -- ãƒ„ãƒ¼ãƒ«ã‚’æŒã£ãŸã¨ãã€é€æ˜åŒ–ã¨ãƒãƒ¼ã‚¯ãƒªãƒƒãƒ—
        tool.Equipped:Connect(function()
            fadeTransparency(1)
            noclipEnabled = true
            enableNoclip()  -- ãƒãƒ¼ã‚¯ãƒªãƒƒãƒ—ã‚’ã‚ªãƒ³ã«ã™ã‚‹
        end)

        -- ãƒ„ãƒ¼ãƒ«ã‚’é›¢ã—ãŸã¨ãã€å…ƒã«æˆ»ã™
        tool.Unequipped:Connect(function()
            fadeTransparency(0)
            noclipEnabled = false
            disableNoclip()  -- ãƒãƒ¼ã‚¯ãƒªãƒƒãƒ—ã‚’ã‚ªãƒ•ã«ã™ã‚‹
        end)
    end    
})

--ã‚¹ãƒŠã‚¤ãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«
ToolTab:AddButton({
    Name = "Sniper",
    Callback = function()
        print("Sniper Tool button pressed")

        local player = game.Players.LocalPlayer
        local camera = workspace.CurrentCamera

        -- ãƒ„ãƒ¼ãƒ«ä½œæˆ
        local sniperTool = Instance.new("Tool")
        sniperTool.Name = "SniperTool"

        local handle = Instance.new("Part")
        handle.Name = "Handle"
        handle.Size = Vector3.new(1, 5, 1)
        handle.Anchored = false
        handle.CanCollide = false
        handle.Parent = sniperTool

        sniperTool.Parent = player.Backpack

        -- GUIä½œæˆ
        local screenGui = Instance.new("ScreenGui")
        screenGui.Parent = player.PlayerGui

        -- ï¼‹ãƒãƒ¼ã‚¯
        local plusLabel = Instance.new("TextLabel")
        plusLabel.Parent = screenGui
        plusLabel.Size = UDim2.new(0, 80, 0, 80)
        plusLabel.Position = UDim2.new(0.5, -40, 0.5, -60)
        plusLabel.Text = "+"
        plusLabel.TextSize = 60
        plusLabel.TextColor3 = Color3.fromRGB(50, 50, 50)
        plusLabel.BackgroundTransparency = 1
        plusLabel.TextStrokeTransparency = 0.8
        plusLabel.Visible = false

        -- ğŸ’¥ãƒœã‚¿ãƒ³
        local explosionButton = Instance.new("TextButton")
        explosionButton.Parent = screenGui
        explosionButton.Size = UDim2.new(0, 50, 0, 50)
        explosionButton.Position = UDim2.new(0, 50, 0, 50)
        explosionButton.Text = "ğŸ’¥"
        explosionButton.TextSize = 30
        explosionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        explosionButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        explosionButton.BackgroundTransparency = 0.5
        explosionButton.BorderSizePixel = 0
        explosionButton.AnchorPoint = Vector2.new(0, 0)
        explosionButton.AutoButtonColor = false
        explosionButton.Visible = false

        -- ç™ºå°„éŸ³
        local fireSound = Instance.new("Sound")
        fireSound.SoundId = "rbxassetid://1905367471"
        fireSound.Volume = 1
        fireSound.Parent = screenGui -- GUIã«ä»•è¾¼ã‚€ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãªã®ã§èã“ãˆã‚‹ï¼‰

        -- ã‚¯ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ éŸ³
        local secondarySound = Instance.new("Sound")
        secondarySound.SoundId = "rbxassetid://138084889"
        secondarySound.Volume = 1
        secondarySound.Parent = screenGui

        -- ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ç®¡ç†
        local lastFireTime = 0
        local cooldown = 3 -- 3ç§’

        -- ãƒ“ãƒ¼ãƒ ç™ºå°„å‡¦ç†
        local function fireBeam()
            local currentTime = tick()
            if currentTime - lastFireTime < cooldown then
                return
            end
            lastFireTime = currentTime

            -- ç™ºå°„éŸ³ã‚’é³´ã‚‰ã™
            fireSound:Play()

            -- ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­ãƒ†ã‚­ã‚¹ãƒˆ
            explosionButton.Text = "Loading"
            explosionButton.TextSize = 20 -- æ–‡å­—å°ã•ãï¼ˆãƒœã‚¿ãƒ³ã«åˆã‚ã›ã‚‹ï¼‰

            -- ãƒœã‚¿ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæŠ¼ã—ãŸæ„Ÿï¼‰
            explosionButton.Position = UDim2.new(0, 52, 0, 52)
            task.wait(0.05)
            explosionButton.Position = UDim2.new(0, 50, 0, 50)

            -- ç´°é•·ã„ãƒ“ãƒ¼ãƒ ç™ºå°„
            local beam = Instance.new("Part")
            beam.Size = Vector3.new(0.2, 0.2, 6) -- ç´°ãã¦é•·ã„
            beam.Material = Enum.Material.Neon
            beam.BrickColor = BrickColor.new("Bright yellow")
            beam.Anchored = false
            beam.CanCollide = false
            beam.CFrame = camera.CFrame * CFrame.new(0, 0, -5) -- ç™ºå°„ä½ç½®ã‚’ã‚«ãƒ¡ãƒ©ã®å‰æ–¹ã«å¤‰æ›´ï¼ˆè‡ªåˆ†ã«å½“ãŸã‚‰ãªã„ã‚ˆã†ã«èª¿æ•´ï¼‰
            beam.Parent = workspace

            -- ç›´ç·šçš„ã«é£›ã°ã™ãŸã‚ã« BodyVelocity ã‚’ä½¿ç”¨
            local bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.MaxForce = Vector3.new(5000, 5000, 5000) -- æœ€å¤§åŠ›ã‚’è¨­å®š
            bodyVelocity.Velocity = camera.CFrame.LookVector * 300 -- é€Ÿã•
            bodyVelocity.Parent = beam

            -- ãƒ“ãƒ¼ãƒ ãŒä½•ã‹ã«å½“ãŸã£ãŸã‚‰å³æ­»
            local connection
            connection = beam.Touched:Connect(function(hit)
                if hit and hit.Parent:FindFirstChild("Humanoid") then
                    local humanoid = hit.Parent.Humanoid
                    if humanoid then
                        local character = hit.Parent

                        -- Explosionã‚’ä½¿ã£ã¦éƒ¨å“ã‚’çˆ†ç™ºã•ã›ã‚‹
                        local explosion = Instance.new("Explosion")
                        explosion.Position = hit.Parent.HumanoidRootPart.Position
                        explosion.BlastRadius = 10 -- çˆ†ç™ºã®åŠå¾„
                        explosion.BlastPressure = 5000 -- çˆ†ç™ºã®åœ§åŠ›
                        explosion.Parent = workspace

                        -- éƒ¨å“ã‚’ãƒãƒ©ãƒãƒ©ã«ã™ã‚‹ãŸã‚ã®ãƒ©ãƒ³ãƒ€ãƒ ãªåŠ›ã‚’åŠ ãˆã‚‹
                        for _, part in pairs(character:GetChildren()) do
                            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                                -- çˆ†ç™ºã®å½±éŸ¿ã‚’å—ã‘ã¦éƒ¨å“ãŒé£›ã°ã•ã‚Œã‚‹
                                part.Velocity = Vector3.new(math.random(-300, 300), math.random(100, 500), math.random(-300, 300))
                                -- éƒ¨å“ã‚’æ¶ˆã™
                                game:GetService("Debris"):AddItem(part, 5) -- 5ç§’å¾Œã«æ¶ˆå»
                            end
                        end

                        -- ã‚¢ã‚¯ã‚»ã‚µãƒªã‚‚æ¶ˆã™
                        for _, accessory in pairs(character:GetChildren()) do
                            if accessory:IsA("Accessory") then
                                accessory:Destroy()
                            end
                        end

                        -- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä½“åŠ›ã‚’å³åº§ã«0ã«è¨­å®šã—ã¦æ­»äº¡ã•ã›ã‚‹
                        humanoid.Health = 0

                        -- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã•ã›ã‚‹
                        for _, part in pairs(character:GetChildren()) do
                            if part:IsA("BasePart") then
                                -- é€æ˜åº¦ã‚’0ã«ã—ã¦ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
                                local fadeOutTween = game:GetService("TweenService"):Create(
                                    part,
                                    TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.Out),
                                    {Transparency = 1} -- é€æ˜ã«ã™ã‚‹
                                )
                                fadeOutTween:Play()
                            end
                        end

                        -- ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆå¾Œã«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å‰Šé™¤
                        task.delay(1, function()
                            character:Destroy()
                        end)
                    end
                    beam:Destroy() -- ãƒ“ãƒ¼ãƒ ã‚’ç ´å£Š
                    connection:Disconnect() -- ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³è§£é™¤
                end
            end)

            -- ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³çµ‚äº†å¾Œã«ãƒœã‚¿ãƒ³æˆ»ã™
            task.delay(cooldown, function()
                explosionButton.Text = "ğŸ’¥"
                explosionButton.TextSize = 30
            end)

            -- ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³1ç§’å¾Œã«2ç•ªç›®ã®éŸ³ã‚’é³´ã‚‰ã™
            task.delay(1, function()
                secondarySound:Play()
            end)
        end

        explosionButton.MouseButton1Click:Connect(fireBeam)

        -- è£…å‚™ã—ãŸæ™‚
        sniperTool.Equipped:Connect(function()
            print("Sniper Tool Equipped")
            camera.FieldOfView = 20
            explosionButton.Visible = true
            plusLabel.Visible = true

            player.CameraMode = Enum.CameraMode.LockFirstPerson
            player.CameraMinZoomDistance = 0
            player.CameraMaxZoomDistance = 0
        end)

        -- å¤–ã—ãŸæ™‚
        sniperTool.Unequipped:Connect(function()
            print("Sniper Tool Unequipped")
            camera.FieldOfView = 70
            explosionButton.Visible = false
            plusLabel.Visible = false

            player.CameraMode = Enum.CameraMode.Classic
            player.CameraMinZoomDistance = 0
            player.CameraMaxZoomDistance = 128
        end)

        print("SniperToolãŒãƒãƒƒã‚¯ãƒ‘ãƒƒã‚¯ã«è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚")
    end
})

--==ã“ã“ã‚ˆã‚Šä¸‹ã¯åˆ¥ã®ã‚¿ãƒ–ã«ãªã‚Šã¾ã™==--

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

local selectedPlayerName = nil

--ã‚¿ãƒ–ã®ä½œæˆ
local TeleportTab = Window:MakeTab({
	Name = "Teleport Menu",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

--ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½œæˆ
local Section = TeleportTab:AddSection({
	Name = "Player Select"
})

-- ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’1å›ã ã‘å®šç¾©
local Dropdown = TeleportTab:AddDropdown({
	Name = "Player List",
	Default = "é¸æŠã—ã¦ãã ã•ã„",
	Options = {}, -- åˆæœŸã¯ç©º
	Callback = function(Value)
		local username = Value:match("%((.-)%)")
		selectedPlayerName = username
		print("é¸æŠã•ã‚ŒãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼:", selectedPlayerName)
	end
})

-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒªã‚¹ãƒˆæ›´æ–°é–¢æ•°
local function UpdatePlayerList()
	local playerNames = {}
	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			table.insert(playerNames, player.DisplayName .. "(" .. player.Name .. ")")
		end
	end
	if Dropdown then
		Dropdown:Refresh(playerNames, true)
	end
end

-- åˆå›å®Ÿè¡Œ
UpdatePlayerList()

-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å…¥é€€å®¤ã§ãƒªã‚¹ãƒˆæ›´æ–°
Players.PlayerAdded:Connect(function()
	task.wait(1)
	UpdatePlayerList()
end)

Players.PlayerRemoving:Connect(function()
	task.defer(UpdatePlayerList)
end)

--Teleport
TeleportTab:AddButton({
	Name = "Teleport",
	Callback = function()
		if selectedPlayerName then
			local targetPlayer = Players:FindFirstChild(selectedPlayerName)
			if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
				LocalPlayer.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, 3, 0)
				print("ãƒ†ãƒ¬ãƒãƒ¼ãƒˆå®Œäº†")
			else
				OrionLib:MakeNotification({
					Name = "ãƒ†ãƒ¬ãƒãƒ¼ãƒˆå¤±æ•—",
					Content = "å¯¾è±¡ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
					Image = "rbxassetid://4483345998",
					Time = 5
				})
			end
		else
			OrionLib:MakeNotification({
				Name = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æœªé¸æŠ",
				Content = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚",
				Image = "rbxassetid://4483345998",
				Time = 5
			})
		end
	end
})

-- View Toggle
local viewConnection = nil -- CharacterAddedã®æ¥ç¶šã‚’ä¿å­˜ã—ã¦ãŠãå¤‰æ•°

TeleportTab:AddToggle({
	Name = "View",
	Default = false,
	Callback = function(state)
		local camera = Workspace.CurrentCamera
		if state then
			if selectedPlayerName then
				local targetPlayer = Players:FindFirstChild(selectedPlayerName)
				if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
					camera.CameraSubject = targetPlayer.Character:FindFirstChild("Humanoid")
					print("ã‚«ãƒ¡ãƒ©ã‚’", selectedPlayerName, "ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚")
					
					-- ãƒªã‚¹ãƒãƒ¼ãƒ³å¯¾å¿œã®ãŸã‚ã®CharacterAddedã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
					viewConnection = targetPlayer.CharacterAdded:Connect(function(newCharacter)
						local humanoid = newCharacter:WaitForChild("Humanoid", 5)
						if humanoid then
							camera.CameraSubject = humanoid
							print("å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒãƒªã‚¹ãƒãƒ¼ãƒ³ã—ã¾ã—ãŸã€‚ã‚«ãƒ¡ãƒ©ã‚’å†è¨­å®šã—ã¾ã—ãŸã€‚")
						end
					end)
				else
					warn("å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚")
					OrionLib:MakeNotification({
						Name = "å¯¾è±¡ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
						Content = "ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¦ãã ã•ã„",
						Image = "rbxassetid://4483345998",
						Time = 5
					})
				end
			else
				warn("ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚")
				OrionLib:MakeNotification({
					Name = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚",
					Content = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„",
					Image = "rbxassetid://4483345998",
					Time = 5
				})
			end
		else
			if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
				camera.CameraSubject = LocalPlayer.Character:FindFirstChild("Humanoid")
				print("ã‚«ãƒ¡ãƒ©ã‚’è‡ªåˆ†ã«æˆ»ã—ã¾ã—ãŸã€‚")
			end
			-- ã‚¤ãƒ™ãƒ³ãƒˆã®æ¥ç¶šã‚’è§£é™¤
			if viewConnection then
				viewConnection:Disconnect()
				viewConnection = nil
			end
		end
	end
})

--ã“ã“ã‹ã‚‰æ–°ã—ã„ã‚¿ãƒ–

--ã‚¿ãƒ–ã®ä½œæˆ
local ESPTab = Window:MakeTab({
	Name = "ESP",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

--ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½œæˆ
local Section = ESPTab:AddSection({
	Name = "Player Esp"
})

--espãƒˆã‚°ãƒ«
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local espEnabled = false
local espLabels = {}

local function removeESP(player)
	if espLabels[player] then
		if espLabels[player].updateConn then
			espLabels[player].updateConn:Disconnect()
		end
		if espLabels[player].gui then
			espLabels[player].gui:Destroy()
		end
		espLabels[player] = nil
	end
end

local function createESP(player)
	if player == LocalPlayer then return end
	if not player.Character or not player.Character:FindFirstChild("Head") then return end

	local head = player.Character.Head
	local humanoid = player.Character:FindFirstChild("Humanoid")
	if not humanoid then return end

	local billboard = Instance.new("BillboardGui")
	billboard.Name = "ESPLabel"
	billboard.Adornee = head
	billboard.Size = UDim2.new(0, 200, 0, 30)  -- é«˜ã•å°ã•ã‚
	billboard.StudsOffset = Vector3.new(0, 2, 0)
	billboard.AlwaysOnTop = true
	billboard.Parent = head

	local textLabel = Instance.new("TextLabel")
	textLabel.Size = UDim2.new(1, 0, 1, 0)
	textLabel.BackgroundTransparency = 1
	textLabel.TextStrokeTransparency = 0.5
	textLabel.TextScaled = false
	textLabel.TextSize = 14  -- å°ã•ã‚æ–‡å­—ã‚µã‚¤ã‚º
	textLabel.Font = Enum.Font.SourceSansBold
	textLabel.Parent = billboard

	local function updateColor()
		if player.Neutral or not player.Team then
			textLabel.TextColor3 = Color3.new(1, 1, 1)
		else
			textLabel.TextColor3 = player.TeamColor.Color
		end
	end
	updateColor()

	local function onDeath()
		removeESP(player)
	end
	humanoid.Died:Connect(onDeath)

	espLabels[player] = {
		gui = billboard,
		label = textLabel,
		updateConn = RunService.RenderStepped:Connect(function()
			if player.Character and player.Character:FindFirstChild("Humanoid") and player.Character:FindFirstChild("HumanoidRootPart") then
				local humanoid = player.Character.Humanoid
				local distance = (LocalPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
				textLabel.Text = string.format("%s / %s | HP: %d | %.0f studs", player.DisplayName, player.Name, humanoid.Health, distance)
			else
				textLabel.Text = "Loading..."
			end
			updateColor()
		end)
	}
end

local function setupCharacterESP(player)
	player.CharacterAdded:Connect(function()
		player.Character:WaitForChild("Humanoid")
		player.Character:WaitForChild("Head")
		wait(0.5)
		if espEnabled then
			createESP(player)
		end
	end)
end

-- ESPãƒˆã‚°ãƒ«æœ¬ä½“
ESPTab:AddToggle({
	Name = "ESP",
	Default = false,
	Callback = function(Value)
		espEnabled = Value

		if espEnabled then
			for _, player in pairs(Players:GetPlayers()) do
				if player ~= LocalPlayer then
					setupCharacterESP(player)
					if player.Character then
						createESP(player)
					end
				end
			end

			Players.PlayerAdded:Connect(function(player)
				if player ~= LocalPlayer then
					setupCharacterESP(player)
				end
			end)
		else
			for _, player in pairs(Players:GetPlayers()) do
				removeESP(player)
			end
		end
	end
})

--Icon Toggle
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local iconEspEnabled = false
local iconEspLabels = {}

local function removeIconESP(player)
	if iconEspLabels[player] then
		if iconEspLabels[player].gui then
			iconEspLabels[player].gui:Destroy()
		end
		iconEspLabels[player] = nil
	end
end

local function createIconESP(player)
	if player == LocalPlayer then return end
	if not player.Character or not player.Character:FindFirstChild("Head") then return end

	local head = player.Character.Head
	local humanoid = player.Character:FindFirstChild("Humanoid")
	if not humanoid then return end

	-- Robloxã®ã‚µãƒ ãƒã‚¤ãƒ«APIã‚’ä½¿ã£ã¦ç›´æ¥URLã‚’ä½œæˆ
	local thumbnail = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=100&height=100&format=png"

	local billboard = Instance.new("BillboardGui")
	billboard.Name = "IconESP"
	billboard.Adornee = head
	billboard.Size = UDim2.new(0, 30, 0, 30) -- å°ã•ã‚
	billboard.StudsOffset = Vector3.new(0, 2, 0)
	billboard.AlwaysOnTop = true
	billboard.Parent = head

	local imageLabel = Instance.new("ImageLabel")
	imageLabel.Size = UDim2.new(1, 0, 1, 0)
	imageLabel.BackgroundTransparency = 1
	imageLabel.Image = thumbnail
	imageLabel.Parent = billboard

	local function onDeath()
		removeIconESP(player)
	end
	humanoid.Died:Connect(onDeath)

	iconEspLabels[player] = {
		gui = billboard
	}
end

local function setupIconCharacterESP(player)
	player.CharacterAdded:Connect(function()
		player.Character:WaitForChild("Humanoid")
		player.Character:WaitForChild("Head")
		wait(0.5)
		if iconEspEnabled then
			createIconESP(player)
		end
	end)
end

-- ãƒˆã‚°ãƒ«æœ¬ä½“
ESPTab:AddToggle({
	Name = "Icon",
	Default = false,
	Callback = function(Value)
		iconEspEnabled = Value

		if iconEspEnabled then
			for _, player in pairs(Players:GetPlayers()) do
				if player ~= LocalPlayer then
					setupIconCharacterESP(player)
					if player.Character then
						createIconESP(player)
					end
				end
			end

			Players.PlayerAdded:Connect(function(player)
				if player ~= LocalPlayer then
					setupIconCharacterESP(player)
				end
			end)
		else
			for _, player in pairs(Players:GetPlayers()) do
				removeIconESP(player)
			end
		end
	end
})

--ã“ã“ã‹ã‚‰æ–°ã—ã„ã‚¿ãƒ–

--ã‚¿ãƒ–ã®ä½œæˆ
local ServerTab = Window:MakeTab({
	Name = "Server",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

--ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½œæˆ
ServerTab:AddSection({
	Name = "Place"
})

--Rejoin button
ServerTab:AddButton({
	Name = "Rejoin",
	Callback = function()
		print("Rejoining...")
		game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
	end    
})

--ServerHop button
ServerTab:AddButton({
	Name = "ServerHop",
	Callback = function()
		print("Server hopping...")
		local TeleportService = game:GetService("TeleportService")
		local HttpService = game:GetService("HttpService")
		local Players = game:GetService("Players")
		local placeId = game.PlaceId
		local servers = {}

		local success, response = pcall(function()
			return HttpService:JSONDecode(game:HttpGetAsync("https://games.roblox.com/v1/games/"..placeId.."/servers/Public?sortOrder=Asc&limit=100"))
		end)

		if success and response and response.data then
			for _, server in pairs(response.data) do
				if server.playing < server.maxPlayers and server.id ~= game.JobId then
					table.insert(servers, server.id)
				end
			end

			if #servers > 0 then
				local randomServerId = servers[math.random(1, #servers)]
				TeleportService:TeleportToPlaceInstance(placeId, randomServerId, Players.LocalPlayer)
			else
				warn("No available servers found.")
			end
		else
			warn("Failed to get server list.")
		end
	end
})

--ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½œæˆ
local Section = ServerTab:AddSection({
	Name = "ServerInfo"
})

-- ã‚µãƒ¼ãƒãƒ¼æ™‚é–“ã‚’å‹•çš„ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã€Tickã®å·®åˆ†ã‚’åˆ©ç”¨
local startTime = tick() -- ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹å§‹æ™‚ã®æ™‚é–“ã‚’è¨˜éŒ²

-- ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ ã™ã‚‹
ServerTab:AddLabel("Game Name: " .. game.Name)
ServerTab:AddLabel("PlaceID: " .. game.PlaceId)
ServerTab:AddLabel("ServerID: " .. game.GameId)
ServerTab:AddLabel("JobID: " .. game.JobId)

local CoolLabel -- ã‚µãƒ¼ãƒãƒ¼æ™‚é–“ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ©ãƒ™ãƒ«

-- ã‚µãƒ¼ãƒãƒ¼æ™‚é–“ã®è¨ˆç®— (çµŒéæ™‚é–“)
local function formatTime(seconds)
    local hours = math.floor(seconds / 3600)
    local minutes = math.floor((seconds % 3600) / 60)
    local secondsRemaining = math.floor(seconds % 60)
    return string.format("%02dæ™‚é–“%02dåˆ†%02dç§’", hours, minutes, secondsRemaining)
end

-- ã‚µãƒ¼ãƒãƒ¼æ™‚é–“ã‚’å‹•çš„ã«æ›´æ–°
local RunService = game:GetService("RunService")
local startTime = tick() -- ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹å§‹æ™‚ã®æ™‚é–“ã‚’è¨˜éŒ²

-- ãƒ©ãƒ™ãƒ«ã®åˆæœŸåŒ–
CoolLabel = ServerTab:AddLabel("Server Time: Loading...")

-- æ›´æ–°é–¢æ•°
local function updateServerTime()
    local elapsedTime = tick() - startTime
    local formattedTime = formatTime(elapsedTime)

    -- ãƒ©ãƒ™ãƒ«ã®å†…å®¹ã‚’æ›´æ–°
    CoolLabel:Set("Server Time: " .. formattedTime)
end

-- 1ç§’ã”ã¨ã«ã‚µãƒ¼ãƒãƒ¼æ™‚é–“ã‚’æ›´æ–°
RunService.Heartbeat:Connect(function()
    updateServerTime()
    wait(1)  -- 1ç§’ã”ã¨ã«æ›´æ–°
end)

--ã“ã“ã‹ã‚‰æ–°ã—ã„ã‚¿ãƒ–

--ã‚¿ãƒ–ã®ä½œæˆ
local ChatTab = Window:MakeTab({
	Name = "Chat",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

--ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½œæˆ
local Section = ChatTab:AddSection({
	Name = "PlayerChat"
})

--ChatSpy Toggle
local spyConnections = {}
local spyEnabled = false

ChatTab:AddToggle({
	Name = "ChatSpy",
	Default = false,
	Callback = function(Value)
		spyEnabled = Value

		-- æœ‰åŠ¹åŒ–å‡¦ç†
		if Value then
			local Players = game:GetService("Players")
			local player = Players.LocalPlayer
			local StarterGui = game:GetService("StarterGui")
			local ReplicatedStorage = game:GetService("ReplicatedStorage")
			local saymsg = ReplicatedStorage:WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("SayMessageRequest")
			local getmsg = ReplicatedStorage:WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("OnMessageDoneFiltering")

			local public = false
			local publicItalics = true
			local spyOnMyself = false

			local privateProperties = {
				Color = Color3.fromRGB(0,255,255),
				Font = Enum.Font.SourceSansBold,
				TextSize = 18,
			}

			local function onChatted(p, msg)
				if not spyEnabled then return end
				if spyOnMyself or p ~= player then
					msg = msg:gsub("[\n\r]", ""):gsub("\t", " "):gsub(" +", " ")
					local hidden = true
					local conn = getmsg.OnClientEvent:Connect(function(packet, channel)
						if packet.SpeakerUserId == p.UserId and packet.Message == msg:sub(#msg - #packet.Message + 1) and
							(channel == "All" or (channel == "Team" and not public and Players[packet.FromSpeaker].Team == player.Team)) then
							hidden = false
						end
					end)
					wait(1)
					conn:Disconnect()
					if hidden and spyEnabled then
						if public then
							saymsg:FireServer((publicItalics and "/me " or "") .. "{SPY} [" .. p.Name .. "]: " .. msg, "All")
						else
							privateProperties.Text = "{SPY} [" .. p.Name .. "]: " .. msg
							StarterGui:SetCore("ChatMakeSystemMessage", privateProperties)
						end
					end
				end
			end

			for _, p in ipairs(Players:GetPlayers()) do
				table.insert(spyConnections, p.Chatted:Connect(function(msg) onChatted(p, msg) end))
			end

			table.insert(spyConnections, Players.PlayerAdded:Connect(function(p)
				table.insert(spyConnections, p.Chatted:Connect(function(msg) onChatted(p, msg) end))
			end))

			privateProperties.Text = "{SPY ENABLED}"
			StarterGui:SetCore("ChatMakeSystemMessage", privateProperties)

		else
			-- ç„¡åŠ¹åŒ–å‡¦ç†
			for _, conn in ipairs(spyConnections) do
				if conn and conn.Disconnect then
					conn:Disconnect()
				end
			end
			spyConnections = {}

			local StarterGui = game:GetService("StarterGui")
			local privateProperties = {
				Text = "{SPY DISABLED}",
				Color = Color3.fromRGB(255, 0, 0),
				Font = Enum.Font.SourceSansBold,
				TextSize = 18,
			}
			StarterGui:SetCore("ChatMakeSystemMessage", privateProperties)
		end
	end
})

OrionLib:Init()
